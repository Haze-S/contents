---
date: "2024-04-15"
title: "[React] Life cycle"
categories: ["React", "WIL"]
summary: "컴포넌트의 삶"
thumbnail: "https://github.com/Haze-S/blog-contents/assets/87344625/1d7d7540-ecc8-447c-a52d-cfb465f77630"
---

![lifecycle](https://github.com/Haze-S/blog-contents/assets/87344625/1d7d7540-ecc8-447c-a52d-cfb465f77630)
[이미지 출처](https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)

리액트 컴포넌트의 라이프사이클은 컴포넌트가 생성되고 소멸되는 과정에서 발생하는 여러 단계를 나타낸다. 각 라이프사이클 단계에서는 특정한 메서드들이 호출되며, 이를 통해 컴포넌트의 상태 변화에 따른 작업을 수행할 수 있다. 리액트의 라이프사이클은 다음과 같다.

## Life Cycle 과정

1. **Mounting (마운팅)**
   - 컴포넌트가 DOM에 삽입되는 과정
   - **`constructor()`**: 컴포넌트가 생성될 때 호출되는 생성자 메서드. 초기 상태 설정 및 이벤트 바인딩 등을 수행한다.
   - **`render()`**: 컴포넌트의 UI를 생성하는 메서드. 리액트 요소를 반환한다.
   - **`componentDidMount()`**: 컴포넌트가 DOM에 삽입된 후 호출되는 메서드. 초기 데이터 로딩이나 외부 API 호출과 같은 작업을 수행한다.
2. **Updating (업데이트)**
   - 컴포넌트의 상태나 속성이 변경되어 UI가 업데이트되는 과정
   - **`shouldComponentUpdate(nextProps, nextState)`**: 컴포넌트의 업데이트가 발생하기 전에 호출되는 메서드. 컴포넌트가 다시 렌더링되어야 하는지 여부를 결정한다.
   - **`render()`**: 컴포넌트의 UI를 다시 생성하는 메서드
   - **`componentDidUpdate(prevProps, prevState)`**: 컴포넌트의 업데이트가 반영된 후 호출되는 메서드. 업데이트된 후의 작업을 수행한다.
3. **Unmounting (언마운팅)**
   - 컴포넌트가 DOM에서 제거되는 과정
   - **`componentWillUnmount()`**: 컴포넌트가 DOM에서 제거되기 직전에 호출되는 메서드. 리소스 해제나 이벤트 해제 등의 정리 작업을 수행한다.
4. **Error Handling (에러 처리)**
   - 렌더링 중 또는 라이프사이클 메서드 내에서 에러가 발생했을 때 호출되는 메서드
   - **`componentDidCatch(error, info)`**: 컴포넌트 내에서 에러가 발생했을 때 호출되는 메서드. 에러를 잡고 처리하는 역할을 수행한다.

이러한 라이프사이클 메서드들을 이용하여 컴포넌트의 동작을 커스터마이징하고, 상태 변화에 따른 작업을 처리할 수 있다. 라이프사이클 메서드의 사용은 컴포넌트의 역할과 요구사항에 따라 다르므로 필요에 따라 적절히 활용해야 한다.

## 언마운트 될 때 청소(clean-up)하는 방법

1. **이벤트 리스너 해제**
   컴포넌트가 마운트될 때 이벤트 리스너를 등록한 경우, 해당 이벤트 리스너를 언마운트될 때 해제해야 한다. 이를 통해 메모리 누수(memory leak)를 방지하고 성능을 최적화할 수 있다.
2. **타이머 해제**
   컴포넌트가 마운트될 때 setTimeout, setInterval 등의 타이머를 설정한 경우, 컴포넌트가 언마운트될 때 타이머를 해제해야 한다. 그렇지 않으면 불필요한 작업이 지속될 수 있고, 성능에 영향을 줄 수 있다.
3. **비동기 작업 취소**
   컴포넌트가 마운트될 때 비동기 작업을 시작한 경우, 해당 작업을 취소해야 한다. 이를 통해 불필요한 네트워크 요청이나 데이터 로딩을 방지할 수 있다.
4. **자원 해제**
   컴포넌트가 마운트될 때 할당된 자원이 있을 경우, 언마운트될 때 해당 자원을 해제해야 한다. 예를 들어, 외부 라이브러리에서 생성된 객체를 사용한 경우, 해당 객체의 리소스를 해제해야 한다.
5. **기타 리소스 정리**
   컴포넌트가 마운트될 때 생성된 기타 리소스들을 언마운트될 때 정리해야 한다. 이는 메모리 누수를 방지하고 애플리케이션의 성능을 최적화하는 데 도움이 된다.

이러한 작업들은 주로 **`componentWillUnmount()`** 라이프사이클 메서드 내에서 수행된다. 이 메서드는 컴포넌트가 DOM에서 제거되기 전에 호출되므로, 여기에서 필요한 청소 작업을 수행할 수 있다. 컴포넌트가 언마운트될 때 이러한 청소 작업을 수행함으로써 메모리 누수를 방지하고 애플리케이션의 성능을 향상시킬 수 있다.
