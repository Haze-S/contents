---
date: '2024-05-22'
title: '[Gatsby] 개츠비! 블로그!'
categories: ['Note']
tags: ['Blog', 'SSG', 'React']
summary: '드디어 나의 로망이 실행되었다!'
thumbnail: 'https://github.com/Haze-S/contents/assets/87344625/a523f319-dc29-4480-99ea-e0be2651fff9'
---

## 개츠비로 블로그를 만든 이유

개발을 공부하다보면 수많은 도구들과 언어들이 있다는 걸 알게된다. 그 사용법을 잊지 않으려면 기록하는 습관을 들여야 하는데 노션과 같은 노트에 기록을 하거나 기술 블로그를 운영하는 두 가지 방법이 있다. 나 같은 경우엔 강의나 책의 내용을 요약하는 경우 노션을 쓰고 그걸 정리하고 내 생각을 더하는 경우 블로그에 정리한다.

블로그를 운영하는 방법 또한 여러 가지가 있다. 티스토리나 벨로그와 같은 플랫폼에서 블로그를 만들 거나 github page, netlify 등 클라우드 서비스를 통해 직접 사이트를 만들기도 한다.

내가 개발 공부를 처음 시작할 때부터 갖고 있던 로망 중 하나가 블로그를 직접 만들어 보는 일이였다. 플랫폼을 활용하면 기록하는 일이야 쉽게 할 수 있었지만 그것보단 깃헙 저장소에 내 블로그를 저장하고 글을 업로드 하면서 잔디를 심어보고 싶었다🤭 스프린트 과정에 참가하여 리액트를 배울 기회가 생겨 이참에 블로그를 만들자 다짐했다!

보통 이런 블로그를 만들 땐 정적 사이트 생성기인 Gatsby 혹은 Jekyll을 선택하게 되는데, 나는 리액트를 공부 했기 때문에 고민할 필요도 없이 Gatsby를 선택했다. 리액트를 배우지 않았더라도 Jekyll은 Ruby 언어 기반으로 만들어졌기 때문에 이미 익숙한 JS보다 학습 기간이 더 필요했다. 내가 미래에 사용하지 않을 가능성이 높은 Ruby를 알기 위해 시간을 쓰는 것보단 이미 알고있는 JS와 리액트가 기반인 Gatsby가 훨씬 좋은 선택이라 생각했다.

또한 Ruby는 JS보다 사용자가 적어서 라이브러리의 업데이트나 커뮤니티 활성도가 Gatsby보단 떨어지는 편이다. 블로그는 잠깐 스쳐가는 프로젝트가 아닌 개발 일을 하는 동안엔 계속 사용하게 될 사이트이기 때문에 커뮤니티 활성도나 나의 활용도가 좋은 쪽으로 선택하는 것이 좋겠다 생각했다.

## JAM Stack

개츠비는 JAM Stack을 활용한 정적 사이트 생성기이다.

> Jam stack is an architecture designed to make the web faster, more secure, and easier to scale.

공식 홈페이지에 의하면 JAM Stack은 더 빠르고, 안전하며, 스케일링하기 쉬운 웹을 만들기 위해 디자인된 아키텍처라고 한다. 이 아키텍처는 JavaScript, API, MarkUp Stack의 약자로, 자바스크립트와 API, HTML이나 CSS 등을 칭하는 MarkUp으로 이루어진 웹 구성 방법이다.

![jamstack](https://github.com/Haze-S/contents/assets/87344625/39ba361d-064c-4bbf-b246-9639772d7775)

기존 웹사이트 방식은 대부분 서버에서 DB 또는 CMS에서 추출한 데이터를 프론트엔드에 전달하는 방식이다. 클라이언트에 데이터를 보여주기 위해 많은 절차를 거쳐야하고 그 구조가 매우 복잡하다. 하지만 JAM Stack을 사용한 방식은 기존과 다르게 절차가 매우 간단하다. 프리 렌더링한 정적 웹사이트를 CDN을 통해 열람할 수 있게 했다. 공식 사이트에서 설명하는 JAM Stack의 이점은 아래와 같다.

1. 기존 방식에 비해 더 빠르게 웹 사이트를 제공할 수 있다. 대부분의 웹 사이트는 처음 접속 시, 서버를 통해 데이터를 받아와 이를 렌더링하는 과정이 필요한데 JAM Stack은 렌더링할 화면들을 모두 Pre-Render하여 제공되어 그만큼 사용자에게 화면을 보여주기 위해 준비하는 시간을 단축할 수 있다. 이에 더불어 브라우저에서 첫 응답을 받기까지 걸리는 시간인 TTFB(Time to First Byte)를 최소화하는 데에는 미리 빌드 된 파일을 CDN을 통해 제공하는 것보다 나은 방법이 없다고 한다.
2. 안전한 웹 사이트를 제공할 수 있다. JAM Stack은 API를 통해 정적 사이트를 생성한다. 여기서 사용되는 API는 JAM Stack을 활용한 각 프레임워크에서의 마이크로 서비스로서, 사이트 생성을 위한 프로세스가 추상화되어 있기 때문에 그만큼 공격 노출 범위가 감소하게 된다. 따라서 개발자는 웹 개발 중 발생할 수 있는 취약점에 대해 보다 덜 신경쓸 수 있다.
3. 스케일링하기 쉬운 웹 사이트를 제공할 수 있다. 정적 웹 사이트에서의 스케일링은 더 많은 지역에서 홈페이지를 제공할 수 있게 하는 의미인데, 미리 빌드 된 파일 제공을 담당하는 CDN이 그 역할을 충분히 수행해낼 수 있다.

## Gatsby

Jekyll을 사용하지 않은 이유가 Ruby를 잘 모르기 때문이라고 이야기 했는데, JAM Stack + 리액트 기반인 프레임워크에는 Gatsby 말고 Next도 해당이 된다. 인기와 활용도가 더 높은 Next를 사용하지 않은 이유는 Gatsby와 Next의 사용 용도가 다르기 때문이다. Next는 정적 사이트 생성 기능도 있지만 주로 서버 사이드 렌더링을 위한 프레임워크이다. 따라서 서버와 통신을 하여 요청을 받을 때마다 동적으로 웹 사이트를 생성한다. 하지만 Gatsby는 서버 없이 오로지 정적 사이트 생성을 위한 프레임워크로 주로 기업 소개 페이지, 블로그, 포트폴리오에 사용된다.

또한 Gatsby는 단순히 정적 페이지를 만들어 주는 것으로 끝나는 것이 아니라, 필요에 따라 CSR(Client Side Rendering)과 SSR(Server Side Rendering), lazy loading을 적절히 섞어 사용할 수 있어 성능 면에서도 단순 정적 페이지보다 큰 장점이 있다.

### Gatsby 3 단계

Gatsby는 Data Sources, Build, Deploy 세 개의 단계로 이루어진다.

![gatsby](https://github.com/Haze-S/contents/assets/87344625/a2760052-d3e6-41f9-9639-efc5756860a8)

#### Data Sources

어떤 사이트를 만들려면 데이터가 필요한데, 데이터를 가져오는 곳을 Gatsby에서는 데이터 소스라 부른다. 여기서 데이터 소스는 위에 JAM Stack에서 살펴본 거처럼 Wordpress 같은 CMS 도구가 될 수도 있고 다른 정적 사이트 생성기처럼 Markdown 파일이 될 수도 있고 API 등을 통해서 다른 곳에서 가져올 수도 있다.

#### Build

Gatsby는 플러그인 시스템이 잘 되어 있어서 다양한 데이터 소스에서 데이터를 가져올 수 있다.

Gatsby는 기본적으로 GraphQL을 사용해서 데이터 소스에서 데이터를 가져온다. 플러그인을 이용해서 RESTful API에서 데이터를 가져올 수도 있지만 GraphQL이 Gatsby에 포함되어 있어서 GraphQL을 사용하면 훨씬 쉽게 쓸 수 있고 원하는 데이터를 선택해서 가져올 수 있다.

웹 사이트는 React를 이용해서 만든다. 코드는 React를 이용해서 컴포넌트 작성하듯이 사용하지만, 공통 레이아웃을 관리하거나 페이지를 생성하거나 데이터 소스와 컴포넌트를 연결하는 기능을 Gatsby에서 제공하고 있어서 쉽게 만들 수 있다.

#### Deploy

이를 빌드하면 정적 사이트로 만들어 준다. CMS나 파일 등의 데이터 소스에서 GraphQL로 가져온 데이터를 빌드할 때 모두 가져와서 정적 파일의 데이터로 포함한다. SPA라면 API로 가져오는 로직이 소스에 들어있고 사용자가 SPA 사이트를 실행할 때 API로 가져오게 되지만 Gatsby는 정적 사이트를 만들어주므로 빌드 시에 GraphQL로 데이터를 가져와서 빌드된 배포 파일에 포함한다. 따라서 사이트를 운영할 때 데이터 소스로 이용한 API 서버나 파일은 제공하지 않아도 된다. 이 부분이 다른 도구들과 Gatsby의 가장 큰 차이점이다.
